function e(t,n,...s){const o=Object.assign({},n),c=s.length>0?[].concat(...s):[];return o.children=c.filter(e=>null!==e&&!1!==e).map(t=>t instanceof Object?t:e("TEXT_ELEMENT",{nodeValue:t})),{type:t,props:o}}function t(e,t,n){const s=e=>e.startsWith("on"),o=e=>!s(e)&&"children"!=e;Object.keys(t).filter(s).forEach(n=>{const s=n.toLowerCase().substring(2);e.removeEventListener(s,t[n])}),Object.keys(t).filter(o).forEach(t=>e[t]=null),Object.keys(n).filter(s).forEach(t=>{const s=t.toLowerCase().substring(2);e.addEventListener(s,n[t])}),Object.keys(n).filter(o).forEach(t=>e[t]=n[t])}function n(e){const{type:s,props:o}=e;if("string"==typeof s){const c="TEXT_ELEMENT"===s?document.createTextNode(""):document.createElement(s);t(c,[],o);const r=(o.children||[]).map(n);return r.map(e=>e.dom).forEach(e=>c.appendChild(e)),{dom:c,element:e,childInstances:r}}{const t={},s=function(e,t){const{type:n,props:s}=e,o=new n(s);return o.__internalInstance=t,o}(e,t),o=n(s.render()),c=o.dom;return Object.assign(t,{dom:c,element:e,childInstance:o,publicInstance:s}),t}}function s(e,o,c){if(null===o){const t=n(c);return e.appendChild(t.dom),t}if(null===c)return e.removeChild(o.dom),null;if(o.element.type!==c.type){const t=n(c);return e.replaceChild(t.dom,o.dom),t}if("string"==typeof c.type)return t(o.dom,o.element.props,c.props),o.childInstances=function(e,t){const{dom:n,childInstances:o}=e,c=t.props.children||[],r=[],l=Math.max(o.length,c.length);for(let e=0;e<l;e++){const t=s(n,o[e],c[e]);r.push(t)}return r}(o,c),o.element=c,o;{o.publicInstance.props=c.props;const t=o.publicInstance.render(),n=s(e,o.childInstance,t);return o.dom=n.dom,o.childInstance=n,o.element=c,o}}let o=null;const c={createElement:e,render:function(e,t){console.log("element is:",e);const n=o;console.log("prevInstance is:",n);const c=s(t,n,e);console.log("nextInstance is:",c),o=c},Component:class{constructor(e,t){this.props=e,this.context=t,this.state=this.state||{}}setState(e){var t;this.state=Object.assign({},this.state,e),s((t=this.__internalInstance).dom.parentDom,t,t.element)}}};var r=c.default||c;export default r;
